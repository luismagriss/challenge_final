Name,Objective,Preconditions,Test Steps,Test Data,Expected Result,Status,Comment
*** Settings ***,,,,,,UNDEFINED,
Documentation        Testes de autenticação,,,,,,UNDEFINED,
Resource             ../../resources/base.resource,,,,,,UNDEFINED,
Cenário: Registrar um novo usuário com sucesso,,,,,,UNDEFINED,
${new_user}        Set Variable    user_test@email.com,,,,,,UNDEFINED,
${response}    POST Endpoint auth/register    ${new_user},,,,,,UNDEFINED,
Should Be Equal As Strings    ${response.status_code}    201,,,,,,UNDEFINED,
Should Not Be Empty    ${response.json()}[data][token],,,,,,UNDEFINED,
Should Be Equal    ${response.json()}[data][role]     user,,,,,,UNDEFINED,
Remove User    ${new_user},,,,,,UNDEFINED,
Cenario: Tentar registrar um usuário com um e-mail já cadastrado,,,,,,UNDEFINED,
${response}    POST Endpoint auth/register    admin@example.com    expected_status=400,,,,,,UNDEFINED,
Should Be Equal As Strings    ${response.status_code}    400,,,,,,UNDEFINED,
Should Be Equal    ${response.json()}[success]    ${False},,,,,,UNDEFINED,
Should Be Equal    ${response.json()}[message]    User already exists,,,,,,UNDEFINED,
Cenário: Logar como usuário e acessar dados do usuário,,,,,,UNDEFINED,
${response}    POST Endpoint auth/login    regularuser@mail.com    teste123,,,,,,UNDEFINED,
Should Be Equal As Strings    ${response.status_code}    200,,,,,,UNDEFINED,
Should Not Be Empty    ${response.json()}[data][token],,,,,,UNDEFINED,
Start Session,,,,,,UNDEFINED,
${response}    GET Endpoint auth/me,,,,,,UNDEFINED,
Cenario: Tentativa de login com credenciais inválidas,,,,,,UNDEFINED,
${response}    POST Endpoint auth/login    testeinvalido@qa.com    teste123    expected_status=401,,,,,,UNDEFINED,
Should Be Equal As Strings    ${response.status_code}    401,,,,,,UNDEFINED,
Should Not Be Empty    ${response.json()}[message]    Invalid email or password,,,,,,UNDEFINED,
Should Be Equal    ${response.json()}[success]    ${False},,,,,,UNDEFINED,
Cenário: Tentar acessar rota de administrador como usuário comum,,,,,,UNDEFINED,
${response}           POST Endpoint auth/login    regularuser@mail.com    teste123,,,,,,UNDEFINED,
Should Be Equal As Strings    ${response.status_code}    200,,,,,,UNDEFINED,
Should Not Be Empty    ${response.json()}[data][token],,,,,,UNDEFINED,
Start Session,,,,,,UNDEFINED,
${body}    Generate random movie data,,,,,,UNDEFINED,
${response_movies}    POST Endpoint /movies    ${body}    expected_status=403,,,,,,UNDEFINED,
Should Be Equal As Strings    ${response_movies.status_code}    403,,,,,,UNDEFINED,
Should Be Equal    ${response_movies.json()}[message]    User role user is not authorized to access this route,,,,,,UNDEFINED,
Should Be Equal    ${response_movies.json()}[success]    ${False},,,,,,UNDEFINED,
*** Settings ***,,,,,,UNDEFINED,
Documentation        Testes de API integrando diferentes endpoints,,,,,,UNDEFINED,
Resource             ../../resources/base.resource,,,,,,UNDEFINED,
"Cenário: Fluxo completo de cadastro de filme, sala e sessão de forma integrada",,,,,,UNDEFINED,
Start Administrator Session,,,,,,UNDEFINED,
${movie_body}        Get Valid Movie Payload,,,,,,UNDEFINED,
${theater_body}      Get Valid Theater Body,,,,,,UNDEFINED,
${movie_response}      POST Endpoint /movies      ${movie_body},,,,,,UNDEFINED,
${theater_response}    POST Endpoint /theaters    ${theater_body},,,,,,UNDEFINED,
${session_body}    Create Dictionary,,,,,,UNDEFINED,
...        movie=${movie_response.json()}[data][_id],,,,,,UNDEFINED,
...        theater=${theater_response.json()}[data][_id],,,,,,UNDEFINED,
...        datetime=2025-06-28T00:56:21.160Z,,,,,,UNDEFINED,
...        fullPrice=20,,,,,,UNDEFINED,
...        halfPrice=10,,,,,,UNDEFINED,
${session_response}    POST Endpoint /sessions    ${session_body},,,[Teardown]    Clear Test Data    ${movie_response.json()}[data][_id]    ${theater_response.json()}[data][id]    ${session_response.json()}[data][id],,,UNDEFINED,
*** Settings ***,,,,,,UNDEFINED,
Documentation        Testes de API do endpoint /movies,,,,,,UNDEFINED,
Resource             ../../resources/base.resource,,,,,,UNDEFINED,
Cenário: Excluir um filme existente como Administrador,,,,,,UNDEFINED,
${response}        POST Endpoint auth/login    teste@qa.com    teste123,,,,,,UNDEFINED,
Start Session,,,,,,UNDEFINED,
${body}                   Generate random movie data,,,,,,UNDEFINED,
${post_movie_response}    POST Endpoint /movies        ${body},,,,,,UNDEFINED,
${delete_movie_response}      DELETE Endpoint /movies    ${post_movie_response.json()}[data][id],,,,,,UNDEFINED,
Should Be Equal As Strings    ${delete_movie_response.status_code}    200,,,,,,UNDEFINED,
Should Be Equal               ${delete_movie_response.json()}[message]    Movie removed,,,,,,UNDEFINED,
${get_movie_response}         GET Endpoint /movies/:id    ${post_movie_response.json()}[data][id]    expected_status=404,,,,,,UNDEFINED,
Should Be Equal As Strings    ${get_movie_response.status_code}    404,,,,,,UNDEFINED,
Should Be Equal               ${get_movie_response.json()}[message]    Movie not found,,,,,,UNDEFINED,
Cenário: Atualizar os detalhes de um filme existente via API,,,,,,UNDEFINED,
${movie_id}    Set Variable    6865d642158f64ced71c67bc,,,,,,UNDEFINED,
${random_body}    Generate random movie data,,,,,,UNDEFINED,
${body}    Create Dictionary,,,,,,UNDEFINED,
...        title=Ghost In The Shell,,,,,,UNDEFINED,
"...        synopsis=O mundo, em 2029, se tornou um local altamente informatizado, a ponto dos seres humanos poderem acessar extensas redes de informações com seu ciber-cérebros. A agente cibernética Major Motoko é a líder da unidade de serviço secreto Esquadrão Shell, responsável por combater o crime. Motoko foi tão modificada que quase todo seu corpo já é robótico. De humano só teria sobrado um fantasma de si mesma.",,,,,,UNDEFINED,
...        director=${random_body}[director],,,,,,UNDEFINED,
...        genres=Ficção Cientifica,,,,,,UNDEFINED,
...        duration=50000,,,,,,UNDEFINED,
...        classification=18,,,,,,UNDEFINED,
...        poster=string,,,,,,UNDEFINED,
...        releaseDate=1995-11-18,,,,,,UNDEFINED,
${response}    PUT Endpoint /movies/:id    ${movie_id}    ${body},,,,,,UNDEFINED,
Should Be Equal As Strings    ${response.status_code}    200,,,,,,UNDEFINED,
Should Be Equal    ${response.json()}[success]    ${True},,,,,,UNDEFINED,
*** Settings ***,,,,,,UNDEFINED,
Documentation        Testes de API do endpoint /reservations,,,,,,UNDEFINED,
Resource             ../../resources/base.resource,,,,,,UNDEFINED,
Suite Setup           Start User Session,,,,,,UNDEFINED,
Cenário: Realizar uma reserva com sucesso,,,,,,UNDEFINED,
${body}    Generate Dynamic Reservation Payload    6859beb409b430d4e6e3e693,,,,,,UNDEFINED,
POST Endpoint /reservations    ${body},,,,,,UNDEFINED,
Cenário: Tentar reservar um assento já ocupado,,,,,,UNDEFINED,
${body}    Create Dictionary,,,,,,UNDEFINED,
...        session=${session_id},,,,,,UNDEFINED,
...        seats=${occupied_seat},,,,,,UNDEFINED,
...        paymentMethod=credit_card,,,,,,UNDEFINED,
${response}    POST Endpoint /reservations    ${body}    expected_status=400,,,,,,UNDEFINED,
Should Be Equal As Strings    ${response.status_code}    400,,,,,,UNDEFINED,
Should Be Equal               ${response.json()}[success]    ${False},,,,,,UNDEFINED,
Cenário: Visualizar histórico de reservas,,,,,,UNDEFINED,
POST Endpoint auth/login    ${regular_user}    ${user_password},,,,,,UNDEFINED,
${response}    GET Endpoint /reservations/me,,,,,,UNDEFINED,
Should Be Equal As Strings    ${response.status_code}    200,,,,,,UNDEFINED,
Should Be Equal               ${response.json()}[success]    ${True},,,,,,UNDEFINED,
*** Settings ***,,,,,,UNDEFINED,
Documentation        Testes de API do endpoint /movies,,,,,,UNDEFINED,
Resource             ../../resources/base.resource,,,,,,UNDEFINED,
Suite Setup          Start Administrator Session,,,,,,UNDEFINED,
Cenário: Criar uma nova sessão de filme com sucesso via API,,,,,,UNDEFINED,
${body}    Create Dictionary,,,,,,UNDEFINED,
...        movie=6865d642158f64ced71c67b7,,,,,,UNDEFINED,
...        theater=6859be19da2247b2b75991b8,,,,,,UNDEFINED,
...        datetime=2025-06-28T00:56:21.160Z,,,,,,UNDEFINED,
...        fullPrice=20,,,,,,UNDEFINED,
...        halfPrice=10,,,,,,UNDEFINED,
${response}    POST Endpoint /sessions    ${body},,,,,,UNDEFINED,
*** Settings ***,,,,,,UNDEFINED,
Documentation        Testes de API do endpoint /movies,,,,,,UNDEFINED,
Resource             ../../resources/base.resource,,,,,,UNDEFINED,
Suite Setup          Start Administrator Session,,,,,,UNDEFINED,
Cenário: Criar uma nova sala de cinema com sucesso via API,,,,,,UNDEFINED,
${random_body}    Generate random movie data,,,,,,UNDEFINED,
${body}           Create Dictionary,,,,,,UNDEFINED,
...               name=${random_body}[title],,,,,,UNDEFINED,
...               capacity=20,,,,,,UNDEFINED,
...               type=standard,,,,,,UNDEFINED,
${response}       POST Endpoint /theaters    ${body},,,,,,UNDEFINED,
